if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((r=>t.resolve(e()).then((()=>r))),(r=>t.resolve(e()).then((()=>{throw r}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e){return weex.requireModule(e)}function r(e,t,...r){uni.__log__?uni.__log__(e,t,...r):console[e].apply(console,[...r,t])}var a,n=t("GCUniPlugin-RUM");const o={onLoad(){a=1e6*(new Date).getTime(),r("log","at GCPageMixin.js:6","onLoad")},onReady(){if(getApp().globalData.GCFirstLoad){getApp().globalData.GCFirstLoad=!1;let e=1e6*(new Date).getTime()-a;null!==a&&e>=0&&n.onCreateView({viewName:this.route,loadTime:e}),a=null,n.startView({viewName:this.route})}}},i=(e,t)=>{const r=e.__vccOpts||e;for(const[a,n]of t)r[a]=n;return r};var l=t("GCUniPlugin-MobileAgent");const s=i({data:()=>({}),mixins:[o],onReady(){r("log","at pages/index/index.vue:32","index onReady")},methods:{bindUser(){l.bindRUMUserData({userId:"Test userId",userName:"Test name",userEmail:"test@123.com",extra:{age:"20"}})},unbindUser(){l.unbindRUMUserData()},appendGlobalContext(){l.appendGlobalContext({ft_global_key:"ft_global_value"})},appendRUMGlobalContext(){l.appendRUMGlobalContext({ft_global_rum_key:"ft_global_rum_value"})},appendLogGlobalContext(){l.appendLogGlobalContext({ft_global_log_key:"ft_global_log_value"})},flushSyncData(){l.flushSyncData()},clearAllData(){l.clearAllData()}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.bindUser())},"绑定用户"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.unbindUser())},"解绑用户"),e.createElementVNode("button",{type:"primary",onClick:r[2]||(r[2]=e=>i.appendGlobalContext())},"appendGlobalContext"),e.createElementVNode("button",{type:"primary",onClick:r[3]||(r[3]=e=>i.appendRUMGlobalContext())},"appendRUMGlobalContext"),e.createElementVNode("button",{type:"primary",onClick:r[4]||(r[4]=e=>i.appendLogGlobalContext())},"appendLogGlobalContext"),e.createElementVNode("button",{type:"primary",onClick:r[5]||(r[5]=e=>i.flushSyncData())},"主动数据同步"),e.createElementVNode("button",{type:"primary",onClick:r[6]||(r[6]=e=>i.clearAllData())},"清除未同步本地数据"),e.createElementVNode("navigator",{url:"../logging/logging"},[e.createElementVNode("button",{type:"primary"},"日志输出")]),e.createElementVNode("navigator",{url:"../tracing/tracing"},[e.createElementVNode("button",{type:"primary"},"网络链路追踪")]),e.createElementVNode("navigator",{url:"../rum/rum"},[e.createElementVNode("button",{type:"primary"},"RUM数据采集")])])}]]);var c=t("GCUniPlugin-RUM");const u={getUUID:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),request(e,t={}){uni.request({url:e,header:t,success(){r("log","at utils.js:21","success")},complete(){r("log","at utils.js:24","complete")}})},rumRequest(e,t,a={}){let n=this.getUUID();var o,i,l,s=tracer.getTraceHeader({key:n,url:e});s=Object.assign({},s,a),c.startResource({key:n,property:{startResource_property:"uni_test"}}),uni.request({url:e,method:t,header:s,success:e=>{r("log","at utils.js:49","调用getTraceHeader:"+JSON.stringify(a)),o=e.header,i=e.data,l=e.statusCode},fail:e=>{i=e.errMsg},complete(){c.stopResource({key:n,property:{stopResource_property:"uni_test"}}),c.addResource({key:n,content:{url:e,httpMethod:t,requestHeader:a,responseHeader:o,responseBody:i,resourceStatus:l}})}})}};var p=t("GCUniPlugin-RUM");const d=i({data:()=>({}),onLoad(){r("log","at pages/rum/rum.vue:26","rum onLoad")},onShow(){r("log","at pages/rum/rum.vue:29","rum onShow")},onReady(){r("log","at pages/rum/rum.vue:32","rum onReady")},methods:{onCreateView(){p.onCreateView({viewName:"custom_rum",loadTime:1e8})},startView(){p.startView({viewName:"custom_rum",property:{startView_property:"uni_test"}})},stopView(){p.stopView({property:{stopView_property:"uni_test"}})},startAction(){p.startAction({actionName:"Button",actionType:"click",property:{action_property:"uni_test"}})},addAction(){p.addAction({actionName:"addButton",actionType:"click",property:{action_property:"uni_test"}})},addError(){p.addError({message:"Error message",stack:"Error stack",property:{error_property:"uni_test"}})},resourceError(){u.rumRequest("https://console-api.guance.com/not/found/","GET",{Accept:"application/json","Content-Type":"application/json"})},resource(){u.rumRequest("https://www.baidu.com","GET",{Accept:"application/json","Content-Type":"application/json"})}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.onCreateView())},"View OnCreate"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.startView())},"View Start"),e.createElementVNode("button",{type:"primary",onClick:r[2]||(r[2]=e=>i.stopView())},"View Stop"),e.createElementVNode("navigator",{url:"../rum/rum-view-mixin"},[e.createElementVNode("button",{type:"primary"},"View Mixin 例子")]),e.createElementVNode("button",{type:"primary",onClick:r[3]||(r[3]=e=>i.startAction())},"Start Action"),e.createElementVNode("button",{type:"primary",onClick:r[4]||(r[4]=e=>i.addAction())},"Add Action"),e.createElementVNode("button",{type:"primary",onClick:r[5]||(r[5]=e=>i.addError())},"Add Error"),e.createElementVNode("button",{type:"primary",onClick:r[6]||(r[6]=e=>i.resource())},"Resource Normal"),e.createElementVNode("button",{type:"primary",onClick:r[7]||(r[7]=e=>i.resourceError())},"Resource Error")])}]]);var g,m=t("GCUniPlugin-RUM");const y=i({data:()=>({}),mixins:[{onLoad(){g=1e6*(new Date).getTime(),r("log","at GCPageViewMixinOnly.js:6","onLoad")},onReady(){let e=1e6*(new Date).getTime()-g;null!==g&&e>=0&&m.onCreateView({viewName:this.route,loadTime:e}),g=null,m.startView({viewName:this.route})},onShow(){null!=g&&m.startView({viewName:this.route})},onHide(){m.stopView()}}],methods:{}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("text",null,"页面 mixin 方式实现 rum view，注意需要与 GCWatchRouter 分开使用否则会重复上报 view 数据")])}]]);var v=t("GCUniPlugin-Tracer");let C="http://testing-ft2x-api.cloudcare.cn/api/v1/account/permissions";const b=i({data:()=>({}),methods:{tracing(){let e=u.getUUID();var t=v.getTraceHeader({key:e,url:C});r("log","at pages/tracing/tracing.vue:25","调用getTraceHeader:"+t),u.request(C,t)}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.tracing())},"网络链路追踪")])}]]);var w=t("GCUniPlugin-Logger");const k=i({data:()=>({}),methods:{log(e){w.logging({content:`Log Status: ${e}`,status:e,property:{log_property:"uni_test"}})}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.log("info"))},"Log Status:info"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.log("warning"))},"Log Status:warning"),e.createElementVNode("button",{type:"primary",onClick:r[2]||(r[2]=e=>i.log("error"))},"Log Status:error"),e.createElementVNode("button",{type:"primary",onClick:r[3]||(r[3]=e=>i.log("critical"))},"Log Status:critical"),e.createElementVNode("button",{type:"primary",onClick:r[4]||(r[4]=e=>i.log("ok"))},"Log Status:ok")])}]]);const _=i({methods:{navigateTo(){uni.navigateTo({url:"/pages/routertest/page"})},reLaunch(){uni.reLaunch({url:"/pages/routertest/tab3"})}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.navigateTo())},"navigateTo"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.reLaunch())},"reLaunch")])}]]);const h=i({},[["render",function(e,t){return null}]]);const V=i({},[["render",function(e,t){return null}]]);const x=i({methods:{redirectTo(){uni.redirectTo({url:"/pages/routertest/page2"})},navigateBack(){uni.navigateBack()}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.redirectTo())},"redirectTo"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.navigateBack())},"navigateBack")])}]]);const f=i({methods:{redirectTo(){uni.redirectTo({url:"/pages/routertest/page"})},navigateBack(){uni.navigateBack()}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.redirectTo())},"redirectTo"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.navigateBack())},"navigateBack")])}]]);__definePage("pages/index/index",s),__definePage("pages/rum/rum",d),__definePage("pages/rum/rum-view-mixin",y),__definePage("pages/tracing/tracing",b),__definePage("pages/logging/logging",k),__definePage("pages/routertest/tab2",_),__definePage("pages/routertest/tab3",h),__definePage("pages/routertest/tab4",V),__definePage("pages/routertest/page",x),__definePage("pages/routertest/page2",f);var E,N,A=t("GCUniPlugin-RUM");const G={globalData:{GCFirstLoad:!0},onLaunch:function(){this.startWatch()},onShow:function(){var e=getCurrentPages();if(e.length>0){let t=e[e.length-1];r("log","at GCWatchRouter.js:21","onShow",t),N=t.route,A.startView({viewName:t.route})}},onHide:function(){r("log","at GCWatchRouter.js:30","onHide"),A.stopView()},methods:{startWatch(){var e=this,t=0;uni.addInterceptor("navigateTo",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("redirectTo",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("reLaunch",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("switchTab",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("navigateBack",{invoke(){(t=getCurrentPages().length)>1&&e.rumRecordNewView(null)},success(a){t>1&&(r("log","at GCWatchRouter.js:78","currentPageLength:"+t),e.navigateBack())}})},rumRecordNewView(e){E=1e6*(new Date).getTime(),N=e},rumStopOldStartNew(e=!0){if(N){r("log","at GCWatchRouter.js:90","stopView"),A.stopView();let t=1e6*(new Date).getTime()-E;null!==E&&t>=0&&A.onCreateView({viewName:N,loadTime:t}),r("log","at GCWatchRouter.js:100","startView",N),A.startView({viewName:N}),e&&this.addPopGestureEventListener()}E=null},navigateBack(){var e=getCurrentPages();if(e.length>0){let t=e[e.length-1];N=t.route,this.rumStopOldStartNew(!1)}},addPopGestureEventListener(){var e=getCurrentPages();if(e.length>0){let t=e[e.length-1].$getAppWebview(),a=this;r("log","at GCWatchRouter.js:124","addEventListener:"+t),t.addEventListener("popGesture",a.eventListenerPopGesture);let n=t.onclose;t.onclose=function(e){r("log","at GCWatchRouter.js:128","onclose"),t.removeEventListener("popGesture",a.eventListenerPopGesture),n(e)}}},eventListenerPopGesture(e){100==e.progress&&(r("log","at GCWatchRouter.js:137","popGesture",e),this.navigateBack())}}};var T=t("GCUniPlugin-MobileAgent"),U=t("GCUniPlugin-Logger"),R=t("GCUniPlugin-RUM"),L=t("GCUniPlugin-Tracer");const S={mixins:[G],onLaunch:function(){var e;e=t("GCUniPlugin-Tracer"),uni.addInterceptor("request",{invoke(t){var r=e.getTraceHeader({url:t.url});t.header=Object.assign({},t.header,r)}}),T.sdkConfig({datakitUrl:"http://127.0.0.1:9529",autoSync:!1,syncPageSize:15,syncSleepTime:15,enableDataIntegerCompatible:!0,compressIntakeRequests:!0,dbCacheLimit:30720,enableLimitWithDbSize:!0,dbDiscardStrategy:"discard",debug:!0,env:"common",globalContext:{sdk_globalContext:"custom_sdk_globalContext"}}),R.setConfig({androidAppId:"android_app_id",iOSAppId:"ios_app_id",errorMonitorType:["cpu","memory"],deviceMonitorType:"all",enableTrackNativeCrash:!0,enableTrackNativeAppANR:!0,enableTrackNativeFreeze:!0,nativeFreezeDurationMs:400,rumDiscardStrategy:"discardOldest",rumCacheLimitCount:1e4,globalContext:{track_id:"track_id",rum_globalContext:"custom_rum_globalContext"}}),U.setConfig({enableLinkRumData:!0,enableCustomLog:!0,discardStrategy:"discardOldest",logLevelFilters:["warning","error"],logCacheLimitCount:6e3,globalContext:{logger_globalContext:"custom_logger_globalContext"}}),L.setConfig({traceType:"ddTrace",enableLinkRUMData:!0})},onShow:function(){r("log","at App.vue:67","App Show")},onHide:function(){r("log","at App.vue:70","App Hide")},onError:function(e){e instanceof Error?(r("log","at App.vue:74","Error name:",e.name),r("log","at App.vue:75","Error message:",e.message),r("log","at App.vue:76","Error stack:",e.stack),R&&R.addError({message:e.message,stack:e.stack,state:"run"})):e instanceof String&&(r("log","at App.vue:85","Error:",e),R&&R.addError({message:e,stack:e,state:"run"}))}};const{app:P,Vuex:B,Pinia:D}={app:e.createVueApp(S)};uni.Vuex=B,uni.Pinia=D,P.provide("__globalStyles",__uniConfig.styles),P._component.mpType="app",P._component.render=()=>{},P.mount("#app")}(Vue);
