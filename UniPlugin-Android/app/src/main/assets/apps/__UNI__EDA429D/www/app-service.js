if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((r=>t.resolve(e()).then((()=>r))),(r=>t.resolve(e()).then((()=>{throw r}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e){return weex.requireModule(e)}function r(e,t,...r){uni.__log__?uni.__log__(e,t,...r):console[e].apply(console,[...r,t])}var a,n=t("GCUniPlugin-RUM");const o={onLoad(){a=1e6*(new Date).getTime(),r("log","at GCPageMixin.js:6","onLoad")},onReady(){if(getApp().globalData.GCFirstLoad){getApp().globalData.GCFirstLoad=!1;let e=1e6*(new Date).getTime()-a;null!==a&&e>=0&&n.onCreateView({viewName:this.route,loadTime:e}),a=null,n.startView({viewName:this.route})}}},i=(e,t)=>{const r=e.__vccOpts||e;for(const[a,n]of t)r[a]=n;return r};var l=t("GCUniPlugin-MobileAgent");const s=i({data:()=>({}),mixins:[o],onReady(){r("log","at pages/index/index.vue:32","index onReady")},methods:{bindUser(){l.bindRUMUserData({userId:"Test userId",userName:"Test name",userEmail:"test@123.com",extra:{age:"20"}})},unbindUser(){l.unbindRUMUserData()},appendGlobalContext(){l.appendGlobalContext({ft_global_key:"ft_global_value"})},appendRUMGlobalContext(){l.appendRUMGlobalContext({ft_global_rum_key:"ft_global_rum_value"})},appendLogGlobalContext(){l.appendLogGlobalContext({ft_global_log_key:"ft_global_log_value"})},flushSyncData(){l.flushSyncData()},clearAllData(){l.clearAllData()}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.bindUser())},"绑定用户"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.unbindUser())},"解绑用户"),e.createElementVNode("button",{type:"primary",onClick:r[2]||(r[2]=e=>i.appendGlobalContext())},"appendGlobalContext"),e.createElementVNode("button",{type:"primary",onClick:r[3]||(r[3]=e=>i.appendRUMGlobalContext())},"appendRUMGlobalContext"),e.createElementVNode("button",{type:"primary",onClick:r[4]||(r[4]=e=>i.appendLogGlobalContext())},"appendLogGlobalContext"),e.createElementVNode("button",{type:"primary",onClick:r[5]||(r[5]=e=>i.flushSyncData())},"主动数据同步"),e.createElementVNode("button",{type:"primary",onClick:r[6]||(r[6]=e=>i.clearAllData())},"清除未同步本地数据"),e.createElementVNode("navigator",{url:"../logging/logging"},[e.createElementVNode("button",{type:"primary"},"日志输出")]),e.createElementVNode("navigator",{url:"../tracing/tracing"},[e.createElementVNode("button",{type:"primary"},"网络链路追踪")]),e.createElementVNode("navigator",{url:"../rum/rum"},[e.createElementVNode("button",{type:"primary"},"RUM数据采集")])])}]]);var u=t("GCUniPlugin-RUM"),c=t("GCUniPlugin-Tracer");const p=uni.getSystemInfoSync().platform,d={getUUID:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),isEmpty:e=>null==e,request(e){let t=this.getUUID();var r;r=!this.isEmpty(e.filterPlatform)&&e.filterPlatform.includes(p);var a,n,o,i={};if(0==r)i=c.getTraceHeader({key:t,url:e.url});return i=Object.assign({},i,e.header),u.startResource({key:t}),uni.request({url:e.url,method:e.method,header:i,data:e.data,timeout:e.timeout,success:t=>{r||(a=t.header,n=t.data,o=t.statusCode),this.isEmpty(e.success)&&e.success(t)},fail:t=>{r||(n=t.errMsg),this.isEmpty(e.fail)&&e.fail(t)},complete(){r||(u.stopResource({key:t}),u.addResource({key:t,content:{url:e.url,httpMethod:e.method,requestHeader:i,responseHeader:a,responseBody:n,resourceStatus:o}})),this.isEmpty(e.complete)&&e.complete()}})}},g={getUUID:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),request(e,t={}){d.request({url:e,header:t,success(){r("log","at utils.js:20","success")},complete(){r("log","at utils.js:23","complete")}})},rumRequest(e,t,a={}){d.request({url:e,method:t,header:a,filterPlatform:["ios"],timeout:3e4,success(e){r("log","at utils.js:35","success:"+JSON.stringify(e))},fail(e){r("log","at utils.js:38","fail:"+JSON.stringify(e))},complete(){r("log","at utils.js:41","complete:"+JSON.stringify(err))}})}};var m=t("GCUniPlugin-RUM");const y=i({data:()=>({}),onLoad(){r("log","at pages/rum/rum.vue:26","rum onLoad")},onShow(){r("log","at pages/rum/rum.vue:29","rum onShow")},onReady(){r("log","at pages/rum/rum.vue:32","rum onReady")},methods:{onCreateView(){m.onCreateView({viewName:"custom_rum",loadTime:1e8})},startView(){m.startView({viewName:"custom_rum",property:{startView_property:"uni_test"}})},stopView(){m.stopView({property:{stopView_property:"uni_test"}})},startAction(){m.startAction({actionName:"Button",actionType:"click",property:{action_property:"uni_test"}})},addAction(){m.addAction({actionName:"addButton",actionType:"click",property:{action_property:"uni_test"}})},addError(){m.addError({message:"Error message",stack:"Error stack",property:{error_property:"uni_test"}})},resourceError(){g.rumRequest("https://console-api.guance.com/not/found/","GET",{Accept:"application/json","Content-Type":"application/json"})},resource(){g.rumRequest("http://120.79.13.13:30007/api/user","GET",{Accept:"application/json","Content-Type":"application/json"})}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.onCreateView())},"View OnCreate"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.startView())},"View Start"),e.createElementVNode("button",{type:"primary",onClick:r[2]||(r[2]=e=>i.stopView())},"View Stop"),e.createElementVNode("navigator",{url:"../rum/rum-view-mixin"},[e.createElementVNode("button",{type:"primary"},"View Mixin 例子")]),e.createElementVNode("button",{type:"primary",onClick:r[3]||(r[3]=e=>i.startAction())},"Start Action"),e.createElementVNode("button",{type:"primary",onClick:r[4]||(r[4]=e=>i.addAction())},"Add Action"),e.createElementVNode("button",{type:"primary",onClick:r[5]||(r[5]=e=>i.addError())},"Add Error"),e.createElementVNode("button",{type:"primary",onClick:r[6]||(r[6]=e=>i.resource())},"Resource Normal"),e.createElementVNode("button",{type:"primary",onClick:r[7]||(r[7]=e=>i.resourceError())},"Resource Error")])}]]);var x,v=t("GCUniPlugin-RUM");const b=i({data:()=>({}),mixins:[{onLoad(){x=1e6*(new Date).getTime(),r("log","at GCPageViewMixinOnly.js:6","onLoad")},onReady(){let e=1e6*(new Date).getTime()-x;null!==x&&e>=0&&v.onCreateView({viewName:this.route,loadTime:e}),x=null,v.startView({viewName:this.route})},onShow(){null!=x&&v.startView({viewName:this.route})},onHide(){v.stopView()}}],methods:{}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("text",null,"页面 mixin 方式实现 rum view，注意需要与 GCWatchRouter 分开使用否则会重复上报 view 数据")])}]]);var C=t("GCUniPlugin-Tracer");let w="http://testing-ft2x-api.cloudcare.cn/api/v1/account/permissions";const f=i({data:()=>({}),methods:{tracing(){let e=g.getUUID();var t=C.getTraceHeader({key:e,url:w});r("log","at pages/tracing/tracing.vue:25","调用getTraceHeader:"+t),g.request(w,t)}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.tracing())},"网络链路追踪")])}]]);var k=t("GCUniPlugin-Logger");const h=i({data:()=>({}),methods:{log(e){k.logging({content:`Log Status: ${e}`,status:e,property:{log_property:"uni_test"}})}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.log("info"))},"Log Status:info"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.log("warning"))},"Log Status:warning"),e.createElementVNode("button",{type:"primary",onClick:r[2]||(r[2]=e=>i.log("error"))},"Log Status:error"),e.createElementVNode("button",{type:"primary",onClick:r[3]||(r[3]=e=>i.log("critical"))},"Log Status:critical"),e.createElementVNode("button",{type:"primary",onClick:r[4]||(r[4]=e=>i.log("ok"))},"Log Status:ok")])}]]);const _=i({methods:{navigateTo(){uni.navigateTo({url:"/pages/routertest/page"})},reLaunch(){uni.reLaunch({url:"/pages/routertest/tab3"})}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.navigateTo())},"navigateTo"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.reLaunch())},"reLaunch")])}]]);const V=i({},[["render",function(e,t){return null}]]);const E=i({},[["render",function(e,t){return null}]]);const N=i({methods:{redirectTo(){uni.redirectTo({url:"/pages/routertest/page2"})},navigateBack(){uni.navigateBack()}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.redirectTo())},"redirectTo"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.navigateBack())},"navigateBack")])}]]);const A=i({methods:{redirectTo(){uni.redirectTo({url:"/pages/routertest/page"})},navigateBack(){uni.navigateBack()}}},[["render",function(t,r,a,n,o,i){return e.openBlock(),e.createElementBlock("view",{class:"btn-list"},[e.createElementVNode("button",{type:"primary",onClick:r[0]||(r[0]=e=>i.redirectTo())},"redirectTo"),e.createElementVNode("button",{type:"primary",onClick:r[1]||(r[1]=e=>i.navigateBack())},"navigateBack")])}]]);__definePage("pages/index/index",s),__definePage("pages/rum/rum",y),__definePage("pages/rum/rum-view-mixin",b),__definePage("pages/tracing/tracing",f),__definePage("pages/logging/logging",h),__definePage("pages/routertest/tab2",_),__definePage("pages/routertest/tab3",V),__definePage("pages/routertest/tab4",E),__definePage("pages/routertest/page",N),__definePage("pages/routertest/page2",A);var G,U,T=t("GCUniPlugin-RUM");const S={globalData:{GCFirstLoad:!0},onLaunch:function(){this.startWatch()},onShow:function(){var e=getCurrentPages();if(e.length>0){let t=e[e.length-1];r("log","at GCWatchRouter.js:21","onShow",t),U=t.route,T.startView({viewName:t.route})}},onHide:function(){r("log","at GCWatchRouter.js:30","onHide"),T.stopView()},methods:{startWatch(){var e=this,t=0;uni.addInterceptor("navigateTo",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("redirectTo",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("reLaunch",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("switchTab",{invoke(t){e.rumRecordNewView(t.url)},success(){e.rumStopOldStartNew()}}),uni.addInterceptor("navigateBack",{invoke(){(t=getCurrentPages().length)>1&&e.rumRecordNewView(null)},success(a){t>1&&(r("log","at GCWatchRouter.js:78","currentPageLength:"+t),e.navigateBack())}})},rumRecordNewView(e){G=1e6*(new Date).getTime(),U=e},rumStopOldStartNew(e=!0){if(U){r("log","at GCWatchRouter.js:90","stopView"),T.stopView();let t=1e6*(new Date).getTime()-G;null!==G&&t>=0&&T.onCreateView({viewName:U,loadTime:t}),r("log","at GCWatchRouter.js:100","startView",U),T.startView({viewName:U}),e&&this.addPopGestureEventListener()}G=null},navigateBack(){var e=getCurrentPages();if(e.length>0){let t=e[e.length-1];U=t.route,this.rumStopOldStartNew(!1)}},addPopGestureEventListener(){var e=getCurrentPages();if(e.length>0){let t=e[e.length-1].$getAppWebview(),a=this;r("log","at GCWatchRouter.js:124","addEventListener:"+t),t.addEventListener("popGesture",a.eventListenerPopGesture);let n=t.onclose;t.onclose=function(e){r("log","at GCWatchRouter.js:128","onclose"),t.removeEventListener("popGesture",a.eventListenerPopGesture),n(e)}}},eventListenerPopGesture(e){100==e.progress&&(r("log","at GCWatchRouter.js:137","popGesture",e),this.navigateBack())}}};var R=t("GCUniPlugin-MobileAgent"),L=t("GCUniPlugin-Logger"),P=t("GCUniPlugin-RUM"),B=t("GCUniPlugin-Tracer");const D={mixins:[S],onLaunch:function(){R.sdkConfig({datawayUrl:"https://rum-openway.guance.com",clientToken:"97b47ad519f643558a1ebf86d82a0544",autoSync:!0,syncPageSize:15,syncSleepTime:15,enableDataIntegerCompatible:!0,compressIntakeRequests:!0,dbCacheLimit:30720,enableLimitWithDbSize:!0,dbDiscardStrategy:"discard",debug:!0,env:"common",globalContext:{sdk_globalContext:"custom_sdk_globalContext"}}),P.setConfig({androidAppId:"guance_android_uniapp_id",iOSAppId:"guance_ios_uniapp_id",errorMonitorType:["cpu","memory"],deviceMonitorType:"all",enableNativeUserResource:!0,enableTrackNativeCrash:!0,enableTrackNativeAppANR:!0,enableTrackNativeFreeze:!0,nativeFreezeDurationMs:400,rumDiscardStrategy:"discardOldest",rumCacheLimitCount:1e4,globalContext:{track_id:"track_id",rum_globalContext:"custom_rum_globalContext"}}),L.setConfig({enableLinkRumData:!0,enableCustomLog:!0,discardStrategy:"discardOldest",logLevelFilters:["warning","error"],logCacheLimitCount:6e3,globalContext:{logger_globalContext:"custom_logger_globalContext"}}),B.setConfig({traceType:"ddTrace",enableLinkRUMData:!0})},onShow:function(){r("log","at App.vue:66","App Show")},onHide:function(){r("log","at App.vue:69","App Hide")},onError:function(e){e instanceof Error?(r("log","at App.vue:73","Error name:",e.name),r("log","at App.vue:74","Error message:",e.message),r("log","at App.vue:75","Error stack:",e.stack),P&&P.addError({message:e.message,stack:e.stack,state:"run"})):e instanceof String&&(r("log","at App.vue:84","Error:",e),P&&P.addError({message:e,stack:e,state:"run"}))}};const{app:M,Vuex:I,Pinia:j}={app:e.createVueApp(D)};uni.Vuex=I,uni.Pinia=j,M.provide("__globalStyles",__uniConfig.styles),M._component.mpType="app",M._component.render=()=>{},M.mount("#app")}(Vue);
